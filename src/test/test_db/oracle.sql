-- oracle.sql

SELECT username FROM dba_users order by USERNAME;
SELECT role FROM dba_roles order by role;

/*
CREATE USER C##TEST_DB IDENTIFIED BY TEST_DB;
ALTER USER C##TEST_DB QUOTA UNLIMITED ON USERS;

GRANT CONNECT, RESOURCE TO C##TEST_DB;

-- Accorder le droit de créer des tables
GRANT CREATE TABLE TO C##TEST_DB;

-- Accorder le droit d'insérer des données dans ses propres tables
GRANT INSERT ANY TABLE TO C##TEST_DB;

-- Accorder le droit de mettre à jour des données dans ses propres tables
GRANT UPDATE ANY TABLE TO C##TEST_DB;

-- Accorder le droit de supprimer des données de ses propres tables
GRANT DELETE ANY TABLE TO C##TEST_DB;

GRANT CREATE SESSION TO C##TEST_DB;
GRANT SELECT ANY TABLE TO C##TEST_DB;
*/


SELECT SYS_CONTEXT('USERENV', 'SESSION_USER')
FROM dual;
SELECT SYS_CONTEXT('USERENV', 'CURRENT_SCHEMA')
FROM dual;
-- Création des tables

CREATE TABLE DEPARTMENT_T
(
    DEP_ID   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DEP_NAME VARCHAR2(50) NOT NULL
);

CREATE TABLE EMPLOYEE_T
(
    EMP_ID     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    LAST_NAME  VARCHAR2(50) NOT NULL,
    FIRST_NAME VARCHAR2(50) NOT NULL,
    BIRTH_DATE DATE,
    DEP_ID     NUMBER,
    CONSTRAINT FK_EMPLOYEE_DEPARTMENT FOREIGN KEY (DEP_ID) REFERENCES DEPARTMENT_T (DEP_ID)
);

-- Insertion des données
INSERT INTO DEPARTMENT_T (DEP_NAME)
VALUES ('Information Technology');
commit;

INSERT INTO DEPARTMENT_T (DEP_NAME)
VALUES ('Human Resources');
commit;

INSERT INTO EMPLOYEE_T (LAST_NAME, FIRST_NAME, BIRTH_DATE, DEP_ID)
VALUES ('Dupont', 'Jean', TO_DATE('1985-06-15', 'YYYY-MM-DD'), 1);
commit;

INSERT INTO EMPLOYEE_T (LAST_NAME, FIRST_NAME, BIRTH_DATE, DEP_ID)
VALUES ('Martin', 'Sophie', TO_DATE('1990-09-23', 'YYYY-MM-DD'), 2);
commit;

INSERT INTO EMPLOYEE_T (LAST_NAME, FIRST_NAME, BIRTH_DATE, DEP_ID)
VALUES ('Durand', 'Luc', TO_DATE('1978-01-10', 'YYYY-MM-DD'), 1);
commit;
