- id: 1
  langageId: 1
  name: "Spring MVC"
  template: "Template"
  skeleton: "springmvc_skeleton"
  projectNameTags:
    - "[projectNameMaj]/settings.gradle"
    - "[projectNameMaj]/src/main/resources/templates/layout/layout.html"
    - "[projectNameMaj]/src/main/resources/templates/login.html"
    - "[projectNameMaj]/src/main/resources/application.properties"
    - "[projectNameMaj]/src/main/java/com/controllers/LoginController.java"
    - "[projectNameMaj]/src/main/java/com/controllers/HelloController.java"
  additionnalFiles: [ ]
  model:
    modelImports: |
      import jakarta.persistence.*;
    modelExtends: ""
    modelAnnotations: |
      @Entity
      @Table(name="${tableName}")
    modelFieldContent: |
      {{tab}}{{#each fields}}
      {{tab}}{{#if this.isPrimaryKey}}
      {{tab}}@Id
      {{tab}}@GeneratedValue(strategy=GenerationType.IDENTITY)
      {{tab}}@Column(name="${this.columnName}"){{elseIf this.isForeignKey}}
      {{tab}}@ManyToOne
      {{tab}}@JoinColumn(name="${this.columnName}"){{else}}
      {{tab}}@Column(name="${this.columnName}"){{/if}}
      {{tab}}private ${this.type} ${this.name};{{#if !@last}}{{newline}}{{/if}}
      {{tab}}{{/each}}
    modelGetterSetter: |
      {{tab}}{{#each fields}}
      {{tab}}{{#if this.withGetters}}
      {{tab}}public ${this.type} get${majStart(this.name)}() {
      {{tab}}   return ${this.name};
      {{tab}}}{{/if}}
      {{#if this.withSetters}}
      {{tab}}public void set${majStart(this.name)}(${this.type} ${this.name}) {
      {{tab}}   this.${this.name} = ${this.name};
      {{tab}}}{{#if !@last}}
      {{tab}}{{/if}}
      {{tab}}{{/if}}{{/each}}
    modelConstructors: |
      {{tab}}public ${majStart(className)}() {
      {{tab}}}
      
      {{tab}}public ${majStart(className)}({{#each fields}} {{#if !this.isPrimaryKey}} ${this.type} ${this.name} {{/if}} {{#if !@last}}, {{/if}}{{/each}}) {
      {{tab}}   {{#each fields}} {{#if !this.isPrimaryKey}}
      {{tab}}   this.${this.name} = ${this.name};{{#if !@last}}
      {{tab}}   {{/if}}{{/if}}{{/each}}
      {{tab}}}
      
      {{tab}}public ${majStart(className)}({{#each fields}}${this.type} ${this.name}{{#if !@last}}, {{/if}}{{/each}}) {
      {{tab}}   {{#each fields}}
      {{tab}}   this.${this.name} = ${this.name};{{#if !@last}}
      {{tab}}   {{/if}}{{/each}}
      {{tab}}}
    modelSavePath: "${majStart(projectName)}/src/main/java/com/${lowerCase(projectName)}/models"
    modelForeignContextAttr: ""
    modelDao:
      name: "${majStart(className)}Repository.java"
      packagePath: "com.${lowerCase(projectName)}.repositories"
      isUnique: false
      content: |
        package ${packagePath};
        
        import org.springframework.data.repository.JpaRepository;

        public interface ${majStart(className)}Repository extends JpaRepository<${majStart(className)}, ${pkColumnType}> {
        }
    modelExtension: "java"
    modelPackage: "com.${lowerCase(projectName)}.models"
  service:
    serviceImports: |
      import com.${lowerCase(projectName)}.models.${majStart(className)};
      import org.springframework.stereotype.Service;
      import com.${lowerCase(projectName)}.repositories.${majStart(className)}Repository;
      import org.springframework.beans.factory.annotation.Autowired;
    serviceAnnotations: |
      @Service
    serviceExtends:
    serviceName: "${majStart(className)}Service"
    serviceFields:
      - serviceFieldAnnotations: |
          {{tab}}@Autowired
        serviceFieldContent: |
          {{tab}}private ${majStart(className)}Repository ${lowerCase(className)};
    serviceMethods:
      - serviceMethodParameter: "List<${majStart(className)}> getAll${majStart(className)}() ${bracketStart}"
        serviceMethodContent: |
          {{tab}}   return ${lowerCase(className)}Repository.findAll();
          {{tab}}${bracketEnd}
      - serviceMethodParameter: "${majStart(className)} get${majStart(className)}ById(Long id) ${bracketStart}"
        serviceMethodContent: |
          {{tab}}   return ${lowerCase(className)}Repository.findById(id);
          {{tab}}${bracketEnd}
      - serviceMethodParameter: "${majStart(className)} create${majStart(className)}(${majStart(className)} ${lowerCase(className)}) ${bracketStart}"
        serviceMethodContent: |
          {{tab}}   return ${lowerCase(className)}Repository.save(${lowerCase(className)});
          {{tab}}${bracketEnd}
      - serviceMethodParameter: "${majStart(className)} update${majStart(className)}(Long id, ${majStart(className)} ${lowerCase(className)}) ${bracketStart}"
        serviceMethodContent: |
          {{tab}}   ${majStart(className)} existing${majStart(className)} = ${lowerCase(className)}Repository.findById(id);
          {{tab}}   existing${majStart(className)} = ${lowerCase(className)};
          {{tab}}   existing${majStart(className)}.setId${majStart(className)}(id);
          {{tab}}   return ${lowerCase(className)}Repository.save(existing${lowerCase(className)});
          {{tab}}${bracketEnd}
      - serviceMethodParameter: "void delete${majStart(className)}(Long id) ${bracketStart}"
        serviceMethodContent: |
          {{tab}}   ${lowerCase(className)}Repository.deleteById(id);
          {{tab}}${bracketEnd}
    serviceSavePath: "${majStart(className)}/src/main/java/com/${lowerCase(className)}/services"
    serviceExtension: "java"
    servicePackage: "com.${lowerCase(projectName)}.services"
  controller:
    controllerImports: |
      import org.springframework.ui.Model;
      import com.${lowerCase(projectName)}.models.${majStart(className)};
      import com.${lowerCase(projectName)}.entities.${majStart(className)};
      import org.springframework.stereotype.Controller;
      import org.springframework.web.bind.annotation.*;
      import com.${lowerCase(projectName)}.repositories.${majStart(className)}Repository;
      import org.springframework.web.servlet.view.RedirectView;
      import org.springframework.beans.factory.annotation.Autowired;
    controllerAnnotations: |
      @Controller
      {{tab}}@RequestMapping("/${className}")
    controllerExtends: ""
    controllerName: "${majStart(className)}Controller"
    controllerFieldContent: |
      {{tab}}@Autowired
      {{tab}}private ${majStart(className)}Service ${lowerCase(className)}Service;
    controllerMethodContent: |
      {{tab}}@GetMapping
      {{tab}}public String getAll${majStart(classNameLink)}(Model model) ${bracketStart}
      {{tab}}   List<${majStart(className)}> ${lowerCase(classNameLink)} = ${lowerCase(className)}Service.getAll${majStart(className)}();
      {{tab}}   model.addAttribute("${lowerCase(classNameLink)}", ${lowerCase(classNameLink)});
      {{tab}}   return "${lowerCase(classNameLink)}/list-${lowerCase(className)}";
      {{tab}}${bracketEnd}
  
      {{tab}}@GetMapping("/{id}")
      {{tab}}public String get${majStart(className)}ById(${pathVariableKeyword} Long id, Model model) ${bracketStart}
      {{tab}}   ${majStart(className)} ${lowerCase(className)} = ${lowerCase(className)}Service.get${majStart(className)}ById(id);
      {{tab}}   model.addAttribute("${lowerCase(className)}", ${lowerCase(className)});
      {{tab}}   return "${lowerCase(classNameLink)}/view-list-${lowerCase(className)}";
      {{tab}}${bracketEnd}
  
      {{tab}}@PostMapping
      {{tab}}public String create${majStart(className)}(${modelAttributeKeyword} ${majStart(className)} ${lowerCase(className)}, Model model) ${bracketStart}
      {{tab}}   ${majStart(className)} new${majStart(className)} = ${lowerCase(className)}Service.create${majStart(className)}(${lowerCase(className)});
      {{tab}}   model.addAttribute("new${majStart(className)}", new${majStart(className)});
      {{tab}}   return "${lowerCase(classNameLink)}/create-list-${lowerCase(className)}";
      {{tab}}${bracketEnd}
  
      {{tab}}@PutMapping("/{id}")
      {{tab}}public String update${majStart(className)}(${pathVariableKeyword} Long id, ${modelAttributeKeyword} ${majStart(className)} ${lowerCase(className)}, Model model) ${bracketStart}
      {{tab}}   ${majStart(className)} update${majStart(className)} = ${lowerCase(className)}Service.update${majStart(className)}(id, ${lowerCase(className)});
      {{tab}}   model.addAttribute("update${majStart(className)}", update${majStart(className)});
      {{tab}}   return "${lowerCase(classNameLink)}/update-list-${lowerCase(className)}";
      {{tab}}${bracketEnd}
  
      {{tab}}@DeleteMapping("/{id}")
      {{tab}}public String delete${majStart(className)}ById(${pathVariableKeyword} Long id, Model model) ${bracketStart}
      {{tab}}   ${lowerCase(className)}Service.delete${majStart(className)}(id);
      {{tab}}   model.addAttribute("message", "${majStart(className)} deleted successfully");
      {{tab}}   return "redirect:/${lowerCase(classNameLink)}";
      {{tab}}${bracketEnd}
    controllerSavePath: "${majStart(className)}/src/main/java/com/${lowerCase(className)}/controllers"
    controllerExtension: "java"
    controllerPackage: "com.${lowerCase(projectName)}.controllers"
  view:
    viewForeignList: ""
    viewTableHeader: "<th scope=\"col\">[fieldNameFormattedMaj]</th>"
    foreignFieldGet: ".label"
    viewTableLine: "<td th:text=\"${e.get[fieldNameMaj]()[foreignFieldGet]}\"></td>"
    viewUpdateFormForeignField: "spring/view/components/springViewUpdateForeign"
    viewUpdateFormField:
      Integer: "spring/view/components/springViewUpdateInt"
      Double: "spring/view/components/springViewUpdateDouble"
      String: "spring/view/components/springViewUpdateString"
      java.time.LocalDate: "spring/view/components/springViewUpdateDate"
      java.time.LocalDateTime: "spring/view/components/springViewUpdateTimestamp"
    viewInsertFormForeignField: "spring/view/components/springViewInsertForeign"
    viewInsertFormField:
      Integer: "spring/view/components/springViewInsertInt"
      Double: "spring/view/components/springViewInsertDouble"
      String: "spring/view/components/springViewInsertString"
      java.time.LocalDate: "spring/view/components/springViewInsertDate"
      java.time.LocalDateTime: "spring/view/components/springViewInsertTimestamp"
    viewName: "[classNameMin]"
    viewContent: "spring/view/springView"
    viewSavePath: "[projectNameMaj]/src/main/resources/templates"
    viewExtension: "html"
    viewCommentStart: "<!-- "
    viewCommentEnd: " -->"
  customChanges: [ ]
  navbarLinks:
    path: "[projectNameMaj]/src/main/resources/templates/layout/layout.html"
    link: "<a href=\"/tocrud[classNameMin].do\" class=\"nav-item nav-link\"><i class=\"fa fa-tachometer-alt me-2\"></i>[classNameformattedMaj]</a>"

- id: 2
  langageId: 2
  name: ".NET MVC with EF"
  skeleton: "csharppsql_skeleton"
  projectNameTags:
    - "[projectNameMaj]/Controllers/HomeController.cs"
    - "[projectNameMaj]/Models/ErrorViewModel.cs"
    - "[projectNameMaj]/Views/Shared/_Layout.cshtml"
    - "[projectNameMaj]/Views/_ViewImports.cshtml"
    - "[projectNameMaj]/Program.cs"
  additionnalFiles:
    - name: "[projectNameMaj].sln"
      content: "csharp/data/solution.templ"
    - name: "[projectNameMaj]/[projectNameMaj].csproj"
      content: "csharp/data/csprojmysql.templ"
  model:
    modelImports: |
      using System.ComponentModel.DataAnnotations;
      using System.ComponentModel.DataAnnotations.Schema;
    modelExtends: ""
    modelAnnotations: ""
    modelFieldContent: |      
      {{tab}}{{#each fields}}{{#if this.isPrimaryKey}}
      {{tab}}[Key]
      {{tab}}[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
      {{tab}}[Column("${this.columnName}")]
      {{tab}}public ${this.type} ${majStart(this.name)} { get; set; }{{elseIf this.isForeignKey}}
      {{tab}}
      {{tab}}[ForeignKey("${this.type}")]
      {{tab}}[Column("${this.columnName}")]
      {{tab}}public ${this.columnType} ${majStart(this.columnName)} { get; set; }
      {{tab}}
      {{tab}}public virtual ${this.type} ${majStart(this.name)} { get; set; }
      {{tab}}{{else}}
      {{tab}}[Column("${this.columnName}")]
      {{tab}}public ${this.type} ${majStart(this.name)} { get; set; }{{/if}}{{#if !@last}}{{newline}}{{/if}}
      {{tab}}{{/each}}
    modelGetterSetter: ""
    modelConstructors: |
      {{tab}}public ${majStart(className)}({{#each fields}}${this.type} ${this.name}{{#if !@last}}, {{/if}}{{/each}}) 
      {{tab}}{
      {{tab}}   {{#each fields}}
      {{tab}}   ${majStart(this.name)} = ${this.name};{{#if !@last}}
      {{tab}}   {{/if}}{{/each}}
      {{tab}}}
    modelSavePath: "[projectNameMaj]/Models"
    modelForeignContextAttr: "public DbSet<[classNameMaj]> [classNameMaj] { get; set; }"
    modelDao:
      name: "${majStart(className)}Repository.java"
      packagePath: "${majStart(projectName)}.Data"
      isUnique: true
      content: |
        using Microsoft.EntityFrameworkCore;
        using System.ComponentModel.DataAnnotations;
        using ${projectName}.Models;
        
        namespace ${packageValue};
        
        public class ${projectName}Context : DbContext
        {
            {{#each entities}}
            public DbSet<${this}> ${this}s { get; set; }
            {{/each}}
            protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
            {
                optionsBuilder.Use${DBType}(@"${connectionString}");
            }
        }
    modelExtension: "cs"
    modelPackage: "${majStart(projectName)}.Models"
    modelTemplate: "ModelTemplate"
  controller:
    controllerImports: |
      using Microsoft.AspNetCore.Mvc;
      using Microsoft.EntityFrameworkCore;
      using ${majStart(projectName)}.Models;
    controllerAnnotations: ""
    controllerExtends: " : Controller"
    controllerName: "[classNameMaj]Controller"
    controllerFields:
      - controllerFieldAnnotations: ""
        controllerFieldContent: "private readonly [classNameMaj]Context _context;"
    controllerFieldsForeign:
        controllerFieldAnnotations: ""
        controllerFieldContent: "private readonly [foreignNameMaj]Context _context[foreignNameMaj];"
    controllerChangeInstanciation:
      template: "o.[fieldNameMaj]=[content];"
      value: "[fieldNameMin]"
    controllerWhereInstanciation:
      template: ""
      value: ""
    controllerForeignInstanciation:
      template: "o.[fieldNameMaj]=await _context.[foreignType].FirstOrDefaultAsync(o => o.[referencedFieldNameMaj] == [content]);"
      value: "[foreignNameMin]"
    controllerForeignList: "ViewData[\"[foreignNameMin]\"] = await _context[foreignType].[foreignType].ToListAsync();"
    controllerForeignContextParam: "[foreignNameMaj]Context context[foreignNameMaj]"
    controllerForeignContextInstanciation: "_context[foreignNameMaj] = context[foreignNameMaj];"
    controllerConstructors: |
      public [classNameMaj]Controller([classNameMaj]Context context[controllerForeignContextParam]){_context = context; [controllerForeignContextInstanciation]}"
    controllerForeignInclude: ".Include(e=>e.[foreignNameMaj])"
    controllerMethods:
      - controllerMethodAnnotations: |
          ...
        controllerMethodParameter: ""
        controllerMethodContent: "csharp/controller/csharpControllerRead"
      - controllerMethodAnnotations: |
          [HttpPost]"
        controllerMethodParameter: "string [fieldNameMin]"
        controllerMethodContent: "csharp/controller/csharpControllerCreate"
      - controllerMethodAnnotations: |
          [HttpPost]"
        controllerMethodParameter: "string [fieldNameMin]"
        controllerMethodContent: "csharp/controller/csharpControllerEdit"
      - controllerMethodAnnotations: |
          [HttpPost]
        controllerMethodParameter: ""
        controllerMethodContent: "csharp/controller/csharpControllerDelete"
      - controllerMethodAnnotations: |
          ...
        controllerMethodParameter: ""
        controllerMethodContent: "csharp/controller/csharpControllerExists"
    controllerSavepath: "[projectNameMaj]/Controllers"
    controllerExtension: "cs"
    controllerPackage: "[projectNameMaj].Controllers"
    controllerTemplate: "ControllerTemplate"
    controllerNameSuffix: "Controller"
  view:
    viewForeignList: "var [foreignNameMin]=(List<[foreignNameMaj]>)ViewData[\"[foreignNameMin]\"];"
    viewTableHeader: "<th scope=\"col\">[fieldNameFormattedMaj]</th>"
    foreignFieldGet: ".Label"
    viewTableLine: "<td>@o.[fieldNameMaj][foreignFieldGet]</td>"
    viewUpdateFormForeignField: "csharp/view/components/csharpViewUpdateForeign"
    viewUpdateFormField:
      int: "csharp/view/components/csharpViewUpdateInt"
      double: "csharp/view/components/csharpViewUpdateDouble"
      string: "csharp/view/components/csharpViewUpdateString"
      DateOnly: "csharp/view/components/csharpViewUpdateDate"
      DateTime: "csharp/view/components/csharpViewUpdateTimestamp"
    viewInsertFormForeignField: "csharp/view/components/csharpViewInsertForeign"
    viewInsertFormField:
      int: "csharp/view/components/csharpViewInsertInt"
      double: "csharp/view/components/csharpViewInsertDouble"
      string: "csharp/view/components/csharpViewInsertString"
      DateOnly: "csharp/view/components/csharpViewInsertDate"
      DateTime: "csharp/view/components/csharpViewInsertTimestamp"
    viewName: "Index"
    viewContent: "csharp/view/csharpView"
    viewSavePath: "[projectNameMaj]/Views/[classNameMaj]"
    viewExtension: "cshtml"
    viewCommentStart: "<!-- "
    viewCommentEnd: " -->"
  customChanges:
    - path: "[projectNameMaj]/appsettings.json"
      changes: "\"[classNameMaj]Context\": \"server=[databaseHost];uid=[user];database=[databaseName];pwd=[pwd]\","
      withEndComma: false
    - path: "[projectNameMaj]/Program.cs"
      changes: "builder.Services.AddDbContext<[classNameMaj]Context>(options => options.UseMySQL(builder.Configuration.GetConnectionString(\"[classNameMaj]Context\") ?? throw new InvalidOperationException(\"Connection string '[classNameMaj]Context' not found.\")));"
      withEndComma: true
  navbarLinks:
    path: "[projectNameMaj]/Views/Shared/_Layout.cshtml"
    link: "<a href=\"/[classNameMaj]\" class=\"nav-item nav-link\"><i class=\"fa fa-tachometer-alt me-2\"></i>[classNameformattedMaj]</a>"
